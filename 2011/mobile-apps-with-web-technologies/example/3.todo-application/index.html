<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>nTodo</title>
  <meta name="description" content="">
  <meta name="author" content="Kenneth Nordahl">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/libs/modernizr-1.7.min.js"></script>
  <script src="js/libs/respond.min.js"></script>
</head>

<body>
  <div id="container" class="scalable">	
    <header>
				<h1>nTodo</h1>
    </header>
    <div id="main" role="main">
			<div class="form-area">
	      <form id="todos-form">
	        <input id="todo" placeholder="Add a todo here and click enter">
	      </form>
	    </div>
	    <ul id="todos">
	    	
	    </ul>
    </div>
    <footer>

    </footer>
  </div> <!--! end of #container -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.1.min.js">\x3C/script>')</script>
  <script src="js/plugins.js"></script>
  <!--
		<script src="js/script.js"></script>
	-->
	<script>
		$(document).ready(function() { 

		  var i = 0;

		  // Initial loading of todos
		  for( i = 0; i < localStorage.length; i++)
		    $("#todos").append("<li id='todo-"+ i +"'>" + localStorage.getItem('todo-'+i) + " <a href='#'>x</a></li>");

		  // Add a todo
		  $("#todos-form").submit(function() {
		    if (  $("#todo").val() != "" ) {
		      localStorage.setItem( "todo-"+i, $("#todo").val() );
		      $("#todos").append("<li id='todo-"+i+"'>"+localStorage.getItem("todo-"+i)+" <a href='#'>x</a></li>")
		      $("#todo-" + i).css('display', 'none');
		      $("#todo-" + i).slideDown();
		      $("#todo").val("");
		      i++;
		    }
		    return false;
		  });

		  // Remove a todo      
		  $("#todos li a").live("click", function() {
		    localStorage.removeItem($(this).parent().attr("id"));
		    $(this).parent().slideUp('slow', function() { $(this).remove(); } );
		    for(i=0; i<localStorage.length; i++) {
		      if( !localStorage.getItem("todo-"+i)) {
		        localStorage.setItem("todo-"+i, localStorage.getItem('todo-' + (i+1) ) );
		        localStorage.removeItem('todo-'+ (i+1) );
		      }
		    }
		  });
		}); 
	</script>

</body>
</html>